@model List<RoCMS.Web.Contract.Models.Widget>

@{
    ViewBag.Title = ViewBag.PageTitle = "Виджеты";
    Layout = "~/Views/Shared/_adminLayout.cshtml";
}


<form class="widget-list-form">
    <div class="row bold text-center">
        <div class="col-xs-3 col-lg-2"><span title="Регулярное выражение по правилам .NET">Шаблон</span></div>
        <div class="col-xs-5 col-lg-6">Путь к .cshtml</div>
    </div>
    <div class="widget-items" data-bind="template: { name: 'widget-template', foreach: widgets }">
    </div>

    <button type="button" class="btn btn-link" data-bind="click: addItem"><i class="fa fa-plus"></i></button>
</form>
<div>
    <button class="button-accept btn btn-success" data-bind="click: save"><i class="fa fa-check"></i> Сохранить</button>
</div>


<script type="text/html" id="widget-template">
    <div class="row widget-item">
        <div class="col-xs-3 col-lg-2">
            <input type="text" class="form-control" data-bind="value: pattern">
        </div>
        <div class="col-xs-5 col-lg-6">
            <input type="text" class="form-control" data-bind="value: viewPath">
        </div>
        <div class="col-xs-1">
            <div class="form-control-static">
                <a class="edit-item btn btn-warning btn-xs" data-bind="click: $parent.editItem" title="Редактировать"><i class="fa fa-pencil"></i></a>
                <a class="remove-item btn btn-danger btn-xs" data-bind="click: $parent.removeItem" title="Удалить виджет"><i class="fa fa-trash-o"></i></a>
            </div>
        </div>
    </div>
</script>


@Js("Content/admin/ro/js/rocms.widgets.js")

@JsInline(@<script>
    $(function () {
        widgetListLoaded();
    });
</script>)
